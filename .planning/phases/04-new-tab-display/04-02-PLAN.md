---
phase: 04-new-tab-display
plan: "02"
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/EmptyHero.tsx
  - src/components/QueueCount.tsx
  - tests/browser/EmptyHero.test.tsx
  - tests/browser/QueueCount.test.tsx
autonomous: true
requirements:
  - DISP-02
  - DISP-03

must_haves:
  truths:
    - "EmptyHero component renders an encouraging prompt when no book has Reading status"
    - "EmptyHero does NOT render a blank page or an error message"
    - "EmptyHero includes a call-to-action (e.g., 'Start reading' or 'Pick a book')"
    - "QueueCount component receives a count number and renders it visibly"
    - "QueueCount renders '0' gracefully when there are no queued books"
    - "QueueCount renders the correct count for 1, 2, or many queued books"
    - "QueueCount uses appropriate labelling (e.g., '3 books to read' not just '3')"
    - "All component logic written via TDD: browser tests first, implementation second"
    - "Tests exercise public interfaces only — no internal mocking"
  artifacts:
    - path: "src/components/EmptyHero.tsx"
      provides: "Empty state component shown when no book is currently being read"
    - path: "tests/browser/EmptyHero.test.tsx"
      provides: "Browser tests for EmptyHero rendering"
    - path: "src/components/QueueCount.tsx"
      provides: "Badge/counter component showing number of Want to Read books"
    - path: "tests/browser/QueueCount.test.tsx"
      provides: "Browser tests for QueueCount rendering with various counts"
  key_links:
    - from: "src/components/EmptyHero.tsx"
      to: "src/newtab/App.tsx (Plan 04-03)"
      via: "App renders EmptyHero when no book has Reading status"
    - from: "src/components/QueueCount.tsx"
      to: "src/newtab/App.tsx (Plan 04-03)"
      via: "App renders QueueCount with the count of want_to_read books"
---

<objective>
Build the EmptyHero and QueueCount components that handle the empty state
and queue visibility requirements for the new tab display.

Purpose: DISP-02 requires a meaningful empty state (not a blank page) when
no book is being read. DISP-03 requires the to-read count to be visible at
all times. These are small, focused components that complement the
CurrentlyReading hero from Plan 04-01.

Output:
- src/components/EmptyHero.tsx — empty state prompt component
- src/components/QueueCount.tsx — queue count badge component
- Browser tests for both components
</objective>

<execution_context>
@/Users/xavierbrinon/.config/Claude/get-shit-done/workflows/execute-plan.md
@/Users/xavierbrinon/.config/Claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.org
@.planning/STATE.org
@src/schema.ts
@src/components/CurrentlyReading.tsx
@src/newtab/App.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Build EmptyHero component with TDD (browser tests)</name>
  <files>src/components/EmptyHero.tsx
tests/browser/EmptyHero.test.tsx</files>
  <action>
Write browser tests first, then implementation. Follow TDD red-green-refactor.

The EmptyHero component is shown when no book has "reading" status. It
provides an encouraging prompt instead of a blank page.

Props:
  - onStartAdding: () => void (callback to open the add-book form)

Test 1 (RED): Renders a heading with an encouraging message (not an error)
  → Create component skeleton, render heading (GREEN)

Test 2 (RED): Renders a descriptive prompt suggesting the user pick a book
  → Add descriptive text below the heading (GREEN)

Test 3 (RED): Renders a call-to-action button (e.g., "Add a Book")
  → Add button element (GREEN)

Test 4 (RED): Clicking the CTA button calls onStartAdding
  → Wire button onClick to onStartAdding (GREEN)

The component should feel welcoming, not empty. Use a dedicated CSS class
(e.g., "empty-hero") so the layout can be styled as a centred prompt. No
error language — this is a valid state, not a failure.

Refactor pass: ensure clean structure, accessible button.
  </action>
  <verify>
    <automated>npm run test -- --project browser</automated>
  </verify>
  <done>EmptyHero renders encouraging prompt with CTA button; all browser tests pass; no error language used</done>
</task>

<task type="auto">
  <name>Task 2: Build QueueCount component with TDD (browser tests)</name>
  <files>src/components/QueueCount.tsx
tests/browser/QueueCount.test.tsx</files>
  <action>
Write browser tests first, then implementation. Follow TDD red-green-refactor.

The QueueCount component displays the number of books with "want_to_read" status.
It is always visible on the new tab page regardless of other state.

Props:
  - count: number

Test 1 (RED): Renders "0 books to read" when count is 0
  → Create component skeleton, render count with label (GREEN)

Test 2 (RED): Renders "1 book to read" when count is 1 (singular)
  → Handle singular/plural in label (GREEN)

Test 3 (RED): Renders "5 books to read" when count is 5 (plural)
  → Verify plural form (GREEN)

Test 4 (RED): The count number is rendered in a way that is visually
distinguishable (e.g., wrapped in a span with a specific class)
  → Add styling hook (e.g., class "queue-count-number") (GREEN)

Keep the component simple — it's a presentational badge. Use a dedicated
CSS class (e.g., "queue-count") for styling.

Refactor pass: ensure clean singular/plural logic.
  </action>
  <verify>
    <automated>npm run test -- --project browser</automated>
  </verify>
  <done>QueueCount renders count with correct singular/plural label; all browser tests pass; count of 0 handled gracefully</done>
</task>

</tasks>

<verification>
After all tasks complete:
1. `npm run lint && npm run fmt:check` pass
2. `npm run test` passes all tests (unit + browser + storybook)
3. `npm run build` succeeds
4. EmptyHero shows an encouraging prompt, not an error or blank page
5. QueueCount handles 0, 1, and many correctly with proper labelling
6. All code written via TDD red-green-refactor
</verification>

<success_criteria>
- Empty state shows a prompt, not a blank page (DISP-02 partial)
- Queue count is renderable with any count value (DISP-03 partial)
- Both components are ready for integration in Plan 04-03
- TDD red-green-refactor followed throughout
</success_criteria>

<output>
After completion, create `.planning/phases/04-new-tab-display/04-02-SUMMARY.md` using the summary template.
</output>
